import{aq as r}from"./D4kMGBnM.js";const m=r("msg",{state:()=>({kind:"msg",type:"info",title:"",desc:"",traceId:"",responseInfo:{},confirm:()=>{},close:()=>{},show:!1,messagesQueue:[],isComponentReady:!1}),actions:{showValid(s){if(s){const{errors:e}=s;this.showMsg({type:"warning",msg:"輸入檢核未通過",desc:e.map(t=>{var h;const o=((h=document.querySelector(`label[for="${t.id}"]`))==null?void 0:h.textContent)||t.id,i=t.errorMessages.join(", ");return`【${o}】 ${i}`})})}else this.showMsg({type:"warning",msg:"輸入檢核未通過",desc:"請修正檢核未通過的輸入框"})},showSuccess(s){this.showMsg({type:"success",msg:(s==null?void 0:s.msg)||"執行成功",onClose:s==null?void 0:s.onClose})},showMsg(s){if(!this.isComponentReady)this.messagesQueue.push(()=>this.showMsg(s));else{const e=this;this.kind="msg",this.type=s.type,this.title=s.msg,this.desc=s.desc,this.traceId=s.traceId,this.responseInfo=s.responseInfo,this.show=!0,this.confirm=()=>{},this.close=()=>{e.doClose(),s.onClose&&s.onClose()}}},showConfirm(s){if(!this.isComponentReady)this.messagesQueue.push(()=>this.showConfirm(s));else{const e=this;this.kind="confirm",this.type=s.type||"info",this.title=s.msg,this.desc=s.desc,this.traceId="",this.responseInfo={},this.show=!0,this.confirm=()=>{e.doClose(),s.onConfirm&&s.onConfirm()},this.close=()=>{e.doClose(),s.onClose&&s.onClose()}}},doClose(){const s=this;this.show=!1,this.confirm=()=>{},this.close=()=>s.doClose()},processQueue(){this.messagesQueue.forEach(s=>s()),this.messagesQueue=[]},setComponentReady(){this.isComponentReady=!0,this.processQueue()}}});export{m as u};
